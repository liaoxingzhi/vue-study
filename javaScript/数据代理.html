<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据代理</title>
</head>
<body>
<script>
    let user = {
        name: "jack",
        gender: "男"
    };

    let age = 18;

    /**
     * TODO Object.defineProperty：在一个对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象
     * obj：要在其上定义属性的对象。
     * prop：要定义或修改的属性的名称。
     * descriptor：将被定义或修改的属性描述符
     */

    // 动态定义或修改对象的属性
    Object.defineProperty(user, 'city', {
        // 属性描述符

        // 该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等） 默认：undefined
        value: "深圳",
        // 当且仅当该属性的 writable 为true时，value才能被赋值运算符改变 默认：false
        writable: true,
        // 当且仅当该属性的 configurable 为 true 时，该属性描述符才能够被改变，同时该属性也能从对应的对象上被删除 默认：false
        configurable: true,
        // 当且仅当该属性的enumerable为true时，该属性才能够出现在对象的枚举属性中（for...in 循环或 Object.keys()） 默认：false
        enumerable: true
    });

    // 通过 getter 和 setter 简单实现数据的双向绑定
    Object.defineProperty(user, 'age', {
        // 访问描述符

        // 当读取对象此属性值时自动调用, 将函数返回的值作为属性值
        get () {
            return age
        },
        // 当修改了对象的当前属性值时自动调用, 监视当前属性值的变化, 修改相关的属性
        set (newVal) {
            age = newVal
        }
    });
</script>
</body>
</html>